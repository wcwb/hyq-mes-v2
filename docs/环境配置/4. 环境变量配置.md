# MESåŽç«¯çŽ¯å¢ƒå˜é‡é…ç½®æŒ‡å—

## ðŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜Žäº†MESåŽç«¯ç³»ç»Ÿæ‰€æœ‰çŽ¯å¢ƒå˜é‡çš„é…ç½®æ–¹æ³•ã€å‚æ•°è¯´æ˜Žå’Œæœ€ä½³å®žè·µï¼Œå¸®åŠ©æ‚¨æ­£ç¡®é…ç½®ä¸åŒçŽ¯å¢ƒä¸‹çš„åº”ç”¨è®¾ç½®ã€‚

## ðŸ”§ é…ç½®æ–‡ä»¶ç»“æž„

### .envæ–‡ä»¶ä½ç½®å’Œä¼˜å…ˆçº§

```bash
# é…ç½®æ–‡ä»¶è¯»å–ä¼˜å…ˆçº§ï¼ˆä»Žé«˜åˆ°ä½Žï¼‰
1. .env.local           # æœ¬åœ°è¦†ç›–é…ç½®
2. .env.{environment}   # çŽ¯å¢ƒç‰¹å®šé…ç½®ï¼ˆå¦‚.env.productionï¼‰
3. .env                 # ä¸»é…ç½®æ–‡ä»¶
4. config/             # é»˜è®¤é…ç½®æ–‡ä»¶
```

### çŽ¯å¢ƒæ–‡ä»¶ç¤ºä¾‹

```bash
# å¤åˆ¶å¹¶é…ç½®çŽ¯å¢ƒæ–‡ä»¶
cp .env.example .env           # å¼€å‘çŽ¯å¢ƒ
cp .env.example .env.testing   # æµ‹è¯•çŽ¯å¢ƒ
cp .env.example .env.production # ç”Ÿäº§çŽ¯å¢ƒ
```

## ðŸ—ï¸ åº”ç”¨åŸºç¡€é…ç½®

### APP_* åº”ç”¨è®¾ç½®

```env
# åº”ç”¨åç§°
APP_NAME="MES Backend"

# åº”ç”¨çŽ¯å¢ƒï¼šlocal, development, testing, staging, production
APP_ENV=local

# åº”ç”¨å¯†é’¥ï¼ˆç”¨äºŽåŠ å¯†ï¼‰- å¿…é¡»é…ç½®
APP_KEY=base64:your_base64_encoded_key_here

# è°ƒè¯•æ¨¡å¼ï¼štrue/false
APP_DEBUG=true

# åº”ç”¨URL
APP_URL=http://localhost

# æ—¶åŒºè®¾ç½®
APP_TIMEZONE=Asia/Shanghai

# è¯­è¨€è®¾ç½®
APP_LOCALE=zh_CN
APP_FALLBACK_LOCALE=en
```

#### é…ç½®è¯´æ˜Ž

| å˜é‡ | è¯´æ˜Ž | å¼€å‘çŽ¯å¢ƒ | ç”Ÿäº§çŽ¯å¢ƒ | æ³¨æ„äº‹é¡¹ |
|------|------|----------|----------|----------|
| `APP_ENV` | åº”ç”¨è¿è¡ŒçŽ¯å¢ƒ | `local` | `production` | å½±å“é”™è¯¯æ˜¾ç¤ºå’Œç¼“å­˜ç­–ç•¥ |
| `APP_DEBUG` | è°ƒè¯•æ¨¡å¼ | `true` | `false` | ç”Ÿäº§çŽ¯å¢ƒå¿…é¡»è®¾ä¸ºfalse |
| `APP_KEY` | åº”ç”¨åŠ å¯†å¯†é’¥ | éšæœºç”Ÿæˆ | éšæœºç”Ÿæˆ | æ¯ä¸ªçŽ¯å¢ƒä½¿ç”¨ä¸åŒå¯†é’¥ |
| `APP_URL` | åº”ç”¨åŸºç¡€URL | `http://localhost` | `https://yourdomain.com` | å½±å“URLç”Ÿæˆå’ŒCORS |

### ç”Ÿæˆåº”ç”¨å¯†é’¥

```bash
# ç”Ÿæˆæ–°çš„åº”ç”¨å¯†é’¥
php artisan key:generate

# æŸ¥çœ‹å½“å‰å¯†é’¥
php artisan tinker
>>> config('app.key')
```

## ðŸ—„ï¸ æ•°æ®åº“é…ç½®

### PostgreSQLé…ç½®

```env
# æ•°æ®åº“è¿žæŽ¥
DB_CONNECTION=pgsql
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=mes_backend
DB_USERNAME=mes_user
DB_PASSWORD=secure_password

# æ•°æ®åº“è¿žæŽ¥é€‰é¡¹
DB_CHARSET=utf8
DB_SCHEMA=public

# è¿žæŽ¥æ± é…ç½®
DB_POOL_SIZE=10
DB_POOL_MIN=2
DB_POOL_MAX=20

# è¶…æ—¶è®¾ç½®
DB_TIMEOUT=60
DB_CONNECT_TIMEOUT=10
```

### å¤šæ•°æ®åº“é…ç½®

```env
# ä¸»æ•°æ®åº“ï¼ˆé»˜è®¤ï¼‰
DB_CONNECTION=pgsql
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=mes_main
DB_USERNAME=mes_main_user
DB_PASSWORD=main_password

# åªè¯»æ•°æ®åº“
DB_READ_HOST=readonly.example.com
DB_READ_PORT=5432
DB_READ_DATABASE=mes_main
DB_READ_USERNAME=mes_read_user
DB_READ_PASSWORD=read_password

# æ—¥å¿—æ•°æ®åº“
DB_LOG_HOST=log-server.example.com
DB_LOG_PORT=5432
DB_LOG_DATABASE=mes_logs
DB_LOG_USERNAME=mes_log_user
DB_LOG_PASSWORD=log_password
```

### æ•°æ®åº“è¿žæŽ¥æµ‹è¯•

```bash
# æµ‹è¯•æ•°æ®åº“è¿žæŽ¥
php artisan tinker
>>> DB::connection()->getPdo()

# æ£€æŸ¥æ•°æ®åº“é…ç½®
php artisan db:show
```

## ðŸ“¦ ç¼“å­˜é…ç½®

### Redisé…ç½®

```env
# Redisä¸»é…ç½®
REDIS_HOST=localhost
REDIS_PASSWORD=redis_password
REDIS_PORT=6379
REDIS_DB=0

# Redisé›†ç¾¤é…ç½®ï¼ˆå¯é€‰ï¼‰
REDIS_CLUSTER=false
REDIS_PREFIX=mes_

# Rediså“¨å…µé…ç½®ï¼ˆå¯é€‰ï¼‰
REDIS_SENTINEL_SERVICE=mymaster
REDIS_SENTINELS=127.0.0.1:26379,127.0.0.1:26380

# è¿žæŽ¥é…ç½®
REDIS_TIMEOUT=5
REDIS_READ_TIMEOUT=0.5
REDIS_PERSISTENT_ID=null
```

### ç¼“å­˜é©±åŠ¨é…ç½®

```env
# ç¼“å­˜é©±åŠ¨ï¼šfile, database, redis, memcached, array
CACHE_DRIVER=redis

# ç¼“å­˜å‰ç¼€
CACHE_PREFIX=mes_cache_

# ç¼“å­˜é»˜è®¤TTLï¼ˆç§’ï¼‰
CACHE_TTL=3600

# åˆ†å¸ƒå¼ç¼“å­˜é…ç½®
CACHE_STORE=redis
CACHE_REDIS_CONNECTION=cache
```

### ä¼šè¯é…ç½®

```env
# ä¼šè¯é©±åŠ¨ï¼šfile, cookie, database, redis, memcached, array
SESSION_DRIVER=redis

# ä¼šè¯ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ†é’Ÿï¼‰
SESSION_LIFETIME=120

# ä¼šè¯åŠ å¯†
SESSION_ENCRYPT=false

# ä¼šè¯æ–‡ä»¶è·¯å¾„
SESSION_FILES=storage/framework/sessions

# Cookieé…ç½®
SESSION_COOKIE=mes_session
SESSION_DOMAIN=null
SESSION_SECURE_COOKIE=false
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax
```

## ðŸ“§ é‚®ä»¶é…ç½®

### SMTPé…ç½®

```env
# é‚®ä»¶é©±åŠ¨ï¼šsmtp, sendmail, mailgun, ses, postmark, log, array
MAIL_MAILER=smtp

# SMTPæœåŠ¡å™¨é…ç½®
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=your-email@example.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls

# å‘ä»¶äººä¿¡æ¯
MAIL_FROM_ADDRESS=noreply@example.com
MAIL_FROM_NAME="${APP_NAME}"

# é‚®ä»¶é˜Ÿåˆ—
MAIL_QUEUE=true
MAIL_QUEUE_CONNECTION=redis
MAIL_QUEUE_NAME=mail
```

### é‚®ä»¶æœåŠ¡å•†é…ç½®

#### è…¾è®¯ä¼ä¸šé‚®ç®±
```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.exmail.qq.com
MAIL_PORT=587
MAIL_USERNAME=your-email@yourcompany.com
MAIL_PASSWORD=your-authorization-code
MAIL_ENCRYPTION=tls
```

#### é˜¿é‡Œäº‘é‚®ä»¶æŽ¨é€
```env
MAIL_MAILER=smtp
MAIL_HOST=smtpdm.aliyun.com
MAIL_PORT=25
MAIL_USERNAME=your-account@your-domain.com
MAIL_PASSWORD=your-smtp-password
MAIL_ENCRYPTION=null
```

#### Gmail
```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
```

## ðŸ”„ é˜Ÿåˆ—é…ç½®

### é˜Ÿåˆ—é©±åŠ¨é…ç½®

```env
# é˜Ÿåˆ—é©±åŠ¨ï¼šsync, database, redis, beanstalkd, sqs
QUEUE_CONNECTION=redis

# Redisé˜Ÿåˆ—é…ç½®
REDIS_QUEUE_CONNECTION=default
REDIS_QUEUE_DB=1

# é˜Ÿåˆ—å‰ç¼€
QUEUE_PREFIX=mes_queue_

# é»˜è®¤é˜Ÿåˆ—åç§°
QUEUE_DEFAULT=default

# å¤±è´¥ä»»åŠ¡é…ç½®
QUEUE_FAILED_DRIVER=database-uuids
```

### é˜Ÿåˆ—ä»»åŠ¡é…ç½®

```env
# é˜Ÿåˆ—å·¥ä½œè¿›ç¨‹é…ç½®
QUEUE_WORKER_MEMORY=512
QUEUE_WORKER_TIMEOUT=300
QUEUE_WORKER_SLEEP=3
QUEUE_WORKER_TRIES=3

# é˜Ÿåˆ—ä¼˜å…ˆçº§
QUEUE_HIGH_PRIORITY=high
QUEUE_NORMAL_PRIORITY=default
QUEUE_LOW_PRIORITY=low

# æ‰¹é‡ä»»åŠ¡é…ç½®
QUEUE_BATCH_SIZE=100
QUEUE_BATCH_TIMEOUT=600
```

## ðŸ“Š æ—¥å¿—é…ç½®

### æ—¥å¿—æ¸ é“é…ç½®

```env
# ä¸»æ—¥å¿—æ¸ é“ï¼šsingle, daily, slack, syslog, errorlog, monolog, custom, stack
LOG_CHANNEL=stack

# æ—¥å¿—çº§åˆ«ï¼šemergency, alert, critical, error, warning, notice, info, debug
LOG_LEVEL=info

# å¼ƒç”¨è­¦å‘Šæ¸ é“
LOG_DEPRECATIONS_CHANNEL=null

# æ—¥å¿—æ–‡ä»¶é…ç½®
LOG_DAILY_DAYS=14
LOG_MAX_FILES=10
```

### è‡ªå®šä¹‰æ—¥å¿—é…ç½®

```env
# ä¸šåŠ¡æ—¥å¿—
LOG_BUSINESS_CHANNEL=business
LOG_BUSINESS_LEVEL=info
LOG_BUSINESS_PATH=storage/logs/business.log

# å®‰å…¨æ—¥å¿—
LOG_SECURITY_CHANNEL=security
LOG_SECURITY_LEVEL=warning
LOG_SECURITY_PATH=storage/logs/security.log

# æ€§èƒ½æ—¥å¿—
LOG_PERFORMANCE_CHANNEL=performance
LOG_PERFORMANCE_LEVEL=info
LOG_PERFORMANCE_PATH=storage/logs/performance.log

# ç¬¬ä¸‰æ–¹æœåŠ¡æ—¥å¿—
LOG_EXTERNAL_API_CHANNEL=external_api
LOG_EXTERNAL_API_LEVEL=debug
LOG_EXTERNAL_API_PATH=storage/logs/external_api.log
```

## ðŸ’¾ æ–‡ä»¶å­˜å‚¨é…ç½®

### æ–‡ä»¶ç³»ç»Ÿé…ç½®

```env
# é»˜è®¤æ–‡ä»¶ç³»ç»Ÿï¼šlocal, public, s3, cos, oss
FILESYSTEM_DISK=local

# å…¬å…±æ–‡ä»¶ç£ç›˜
FILESYSTEM_PUBLIC_DISK=public

# ç§æœ‰æ–‡ä»¶ç£ç›˜
FILESYSTEM_PRIVATE_DISK=local
```

### äº‘å­˜å‚¨é…ç½®

#### AWS S3
```env
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=your-bucket-name
AWS_USE_PATH_STYLE_ENDPOINT=false
```

#### è…¾è®¯äº‘COS
```env
COS_SECRET_ID=your-secret-id
COS_SECRET_KEY=your-secret-key
COS_REGION=ap-guangzhou
COS_BUCKET=your-bucket-name
COS_CDN_URL=https://your-cdn-domain.com
```

#### é˜¿é‡Œäº‘OSS
```env
OSS_ACCESS_KEY_ID=your-access-key
OSS_ACCESS_KEY_SECRET=your-secret-key
OSS_BUCKET=your-bucket-name
OSS_ENDPOINT=oss-cn-guangzhou.aliyuncs.com
OSS_CDN_URL=https://your-cdn-domain.com
```

## ðŸ”’ å®‰å…¨é…ç½®

### è®¤è¯é…ç½®

```env
# JWTé…ç½®ï¼ˆå¦‚æžœä½¿ç”¨JWTï¼‰
JWT_SECRET=your-jwt-secret
JWT_TTL=60
JWT_REFRESH_TTL=20160
JWT_ALGO=HS256

# Sanctumé…ç½®
SANCTUM_STATEFUL_DOMAINS=localhost,127.0.0.1,mes-backend.local
SANCTUM_GUARD=web

# å¯†ç é‡ç½®
PASSWORD_RESET_TOKEN_TTL=60
```

### CORSé…ç½®

```env
# CORSé…ç½®
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_EXPOSED_HEADERS=
CORS_MAX_AGE=86400
CORS_SUPPORTS_CREDENTIALS=true
```

## ðŸ”§ ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®

### ç›‘æŽ§å’Œé”™è¯¯è¿½è¸ª

```env
# Sentryé”™è¯¯è¿½è¸ª
SENTRY_LARAVEL_DSN=https://your-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=1.0

# New Relic APM
NEWRELIC_LICENSE_KEY=your-license-key
NEWRELIC_APPNAME="MES Backend"
```

### çŸ­ä¿¡æœåŠ¡

```env
# é˜¿é‡Œäº‘çŸ­ä¿¡
ALIYUN_SMS_ACCESS_KEY_ID=your-access-key
ALIYUN_SMS_ACCESS_KEY_SECRET=your-secret-key
ALIYUN_SMS_SIGN_NAME=your-sign-name
ALIYUN_SMS_TEMPLATE_CODE=SMS_123456789

# è…¾è®¯äº‘çŸ­ä¿¡
TENCENT_SMS_SECRET_ID=your-secret-id
TENCENT_SMS_SECRET_KEY=your-secret-key
TENCENT_SMS_SDK_APP_ID=your-app-id
TENCENT_SMS_SIGN_NAME=your-sign-name
```

## ðŸŽ›ï¸ Laravelç‰¹æ€§é…ç½®

### Telescopeé…ç½®

```env
# Telescopeå¯ç”¨çŠ¶æ€
TELESCOPE_ENABLED=true

# TelescopeåŸŸåé™åˆ¶
TELESCOPE_DOMAIN=telescope.mes-backend.local

# Telescopeè·¯å¾„
TELESCOPE_PATH=telescope

# å­˜å‚¨é©±åŠ¨
TELESCOPE_DRIVER=database

# æ•°æ®ä¿ç•™å¤©æ•°
TELESCOPE_PRUNE_HOURS=48
```

### Horizoné…ç½®

```env
# Horizonå¯ç”¨çŠ¶æ€
HORIZON_ENABLED=true

# HorizonåŸŸåé™åˆ¶  
HORIZON_DOMAIN=horizon.mes-backend.local

# Horizonè·¯å¾„
HORIZON_PATH=horizon

# é˜Ÿåˆ—å¹³è¡¡ç­–ç•¥
HORIZON_BALANCE=auto

# æœ€å¤§è¿›ç¨‹æ•°
HORIZON_MAX_PROCESSES=20
```

## ðŸŒ çŽ¯å¢ƒç‰¹å®šé…ç½®

### å¼€å‘çŽ¯å¢ƒ (.env.local)

```env
APP_ENV=local
APP_DEBUG=true
LOG_LEVEL=debug

# å¼€å‘æ•°æ®åº“
DB_DATABASE=mes_development
DB_USERNAME=mes_dev
DB_PASSWORD=mes_dev_pass

# æœ¬åœ°ç¼“å­˜
CACHE_DRIVER=file
SESSION_DRIVER=file
QUEUE_CONNECTION=sync

# é‚®ä»¶è°ƒè¯•
MAIL_MAILER=log

# è°ƒè¯•å·¥å…·
TELESCOPE_ENABLED=true
DEBUGBAR_ENABLED=true
```

### æµ‹è¯•çŽ¯å¢ƒ (.env.testing)

```env
APP_ENV=testing
APP_DEBUG=false
LOG_LEVEL=error

# æµ‹è¯•æ•°æ®åº“
DB_DATABASE=mes_testing
DB_USERNAME=mes_test
DB_PASSWORD=mes_test_pass

# å†…å­˜é©±åŠ¨
CACHE_DRIVER=array
SESSION_DRIVER=array
QUEUE_CONNECTION=sync
MAIL_MAILER=array

# ç¦ç”¨è°ƒè¯•å·¥å…·
TELESCOPE_ENABLED=false
DEBUGBAR_ENABLED=false
```

### ç”Ÿäº§çŽ¯å¢ƒ (.env.production)

```env
APP_ENV=production
APP_DEBUG=false
LOG_LEVEL=error

# ç”Ÿäº§æ•°æ®åº“
DB_DATABASE=mes_production
DB_USERNAME=mes_prod
DB_PASSWORD=complex_secure_password

# é«˜æ€§èƒ½ç¼“å­˜
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# ç”Ÿäº§é‚®ä»¶
MAIL_MAILER=smtp

# å®‰å…¨é…ç½®
SESSION_SECURE_COOKIE=true
SESSION_DOMAIN=.yourdomain.com

# æ€§èƒ½ä¼˜åŒ–
OPCACHE_ENABLE=true
HORIZON_ENABLED=true
```

## âœ… é…ç½®éªŒè¯

### çŽ¯å¢ƒæ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥çŽ¯å¢ƒé…ç½®
php artisan config:show

# æ£€æŸ¥ç‰¹å®šé…ç½®
php artisan config:show database
php artisan config:show mail
php artisan config:show cache

# éªŒè¯æ•°æ®åº“è¿žæŽ¥
php artisan db:show

# éªŒè¯ç¼“å­˜è¿žæŽ¥
php artisan cache:table
php artisan cache:clear

# éªŒè¯é˜Ÿåˆ—é…ç½®
php artisan queue:work --once
```

### é…ç½®æµ‹è¯•è„šæœ¬

```bash
# åˆ›å»ºé…ç½®æµ‹è¯•è„šæœ¬
cat > config-test.php << 'EOF'
<?php
// æµ‹è¯•æ•°æ®åº“è¿žæŽ¥
try {
    $pdo = new PDO(
        'pgsql:host=' . env('DB_HOST') . ';dbname=' . env('DB_DATABASE'),
        env('DB_USERNAME'),
        env('DB_PASSWORD')
    );
    echo "âœ… æ•°æ®åº“è¿žæŽ¥æˆåŠŸ\n";
} catch (Exception $e) {
    echo "âŒ æ•°æ®åº“è¿žæŽ¥å¤±è´¥: " . $e->getMessage() . "\n";
}

// æµ‹è¯•Redisè¿žæŽ¥
try {
    $redis = new Redis();
    $redis->connect(env('REDIS_HOST'), env('REDIS_PORT'));
    if (env('REDIS_PASSWORD')) {
        $redis->auth(env('REDIS_PASSWORD'));
    }
    echo "âœ… Redisè¿žæŽ¥æˆåŠŸ\n";
} catch (Exception $e) {
    echo "âŒ Redisè¿žæŽ¥å¤±è´¥: " . $e->getMessage() . "\n";
}
EOF

php config-test.php
```

## ðŸš¨ å®‰å…¨æ³¨æ„äº‹é¡¹

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

```bash
# æ°¸è¿œä¸è¦æäº¤è¿™äº›æ•æ„Ÿä¿¡æ¯åˆ°ç‰ˆæœ¬æŽ§åˆ¶
APP_KEY=*
DB_PASSWORD=*
REDIS_PASSWORD=*
MAIL_PASSWORD=*
JWT_SECRET=*
AWS_SECRET_ACCESS_KEY=*
*_SECRET_KEY=*
*_SECRET=*
*_PASSWORD=*
```

### .gitignoreé…ç½®

```gitignore
# çŽ¯å¢ƒé…ç½®æ–‡ä»¶
.env
.env.local
.env.*.local
.env.backup

# æ•æ„Ÿé…ç½®å¤‡ä»½
*.env.backup
env.*.backup
```

### é…ç½®æ–‡ä»¶æƒé™

```bash
# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
chmod 600 .env
chmod 600 .env.*

# ç¡®ä¿åªæœ‰åº”ç”¨ç”¨æˆ·å¯ä»¥è¯»å–
chown www-data:www-data .env
```

## ðŸ”„ é…ç½®ç®¡ç†æœ€ä½³å®žè·µ

### é…ç½®ç¼“å­˜

```bash
# ç”Ÿäº§çŽ¯å¢ƒç¼“å­˜é…ç½®ï¼ˆæå‡æ€§èƒ½ï¼‰
php artisan config:cache

# æ¸…é™¤é…ç½®ç¼“å­˜
php artisan config:clear

# åŒæ—¶æ¸…é™¤æ‰€æœ‰ç¼“å­˜
php artisan optimize:clear
```

### é…ç½®å¤‡ä»½

```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
cp .env .env.backup.$(date +%Y%m%d)

# è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬
#!/bin/bash
BACKUP_DIR="/var/backups/mes-config"
mkdir -p $BACKUP_DIR
cp .env "$BACKUP_DIR/.env.$(date +%Y%m%d_%H%M%S)"
```

### é…ç½®éªŒè¯

```bash
# åˆ›å»ºé…ç½®éªŒè¯è„šæœ¬
cat > validate-config.sh << 'EOF'
#!/bin/bash

echo "ðŸ” éªŒè¯MESåŽç«¯é…ç½®..."

# æ£€æŸ¥å¿…éœ€çš„çŽ¯å¢ƒå˜é‡
required_vars=(
    "APP_KEY"
    "DB_DATABASE"
    "DB_USERNAME"
    "DB_PASSWORD"
)

for var in "${required_vars[@]}"; do
    if [ -z "${!var}" ]; then
        echo "âŒ ç¼ºå°‘å¿…éœ€çš„çŽ¯å¢ƒå˜é‡: $var"
        exit 1
    else
        echo "âœ… $var å·²é…ç½®"
    fi
done

echo "âœ… é…ç½®éªŒè¯å®Œæˆ"
EOF

chmod +x validate-config.sh
./validate-config.sh
```

---

**ðŸ“‹ é…ç½®å®ŒæˆåŽ**ï¼šä½¿ç”¨ `php artisan config:cache` ç¼“å­˜é…ç½®ä»¥æå‡æ€§èƒ½ï¼Œç„¶åŽå‚è€ƒ [5. æ•°æ®åº“é…ç½®.md](./5.%20æ•°æ®åº“é…ç½®.md) è¿›è¡Œæ•°æ®åº“çš„è¯¦ç»†é…ç½®ã€‚ 