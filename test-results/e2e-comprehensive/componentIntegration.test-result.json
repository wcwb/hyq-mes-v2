{
  "suite": "组件集成测试",
  "file": "componentIntegration.test.cjs",
  "success": false,
  "duration": 64973,
  "estimatedTime": "90s",
  "stdout": "  console.log\n    ✅ Jest Frontend E2E 测试环境设置完成\n\n      at Object.<anonymous> (jest.setup.cjs:317:9)\n\n  console.log\n    🚀 开始 Frontend E2E 测试环境初始化...\n\n      at Object.<anonymous> (jest.setup.cjs:269:13)\n\n  console.log\n    📍 测试基础URL: http://localhost:8000\n\n      at Object.<anonymous> (jest.setup.cjs:270:13)\n\n  console.log\n    🖥️  无头模式: 禁用\n\n      at Object.<anonymous> (jest.setup.cjs:271:13)\n\n  console.log\n    📸 截图保存路径: /Users/jameswang/Codes/hyq-mes-v2/test-results/e2e-comprehensive\n\n      at Object.<anonymous> (jest.setup.cjs:272:13)\n\n  console.error\n    ❌ 无法连接到测试服务器: A dynamic import callback was invoked without --experimental-vm-modules\n\n      286 |         }\n      287 |     } catch (error) {\n    > 288 |         console.error('❌ 无法连接到测试服务器:', error.message);\n          |                 ^\n      289 |         console.error('请确保开发服务器正在运行: php artisan serve');\n      290 |     }\n      291 | });\n\n      at Object.<anonymous> (jest.setup.cjs:288:17)\n\n  console.error\n    请确保开发服务器正在运行: php artisan serve\n\n      287 |     } catch (error) {\n      288 |         console.error('❌ 无法连接到测试服务器:', error.message);\n    > 289 |         console.error('请确保开发服务器正在运行: php artisan serve');\n          |                 ^\n      290 |     }\n      291 | });\n      292 |\n\n      at Object.<anonymous> (jest.setup.cjs:289:17)\n\n  console.log\n    🧹 Frontend E2E 测试环境清理完成\n\n      at Object.<anonymous> (jest.setup.cjs:295:13)\n\n",
  "stderr": "FAIL ./componentIntegration.test.cjs (64.544 s)\n  现有组件集成测试\n    SidebarTrigger 集成测试\n      ✕ SidebarTrigger应该正确控制侧边栏显示/隐藏 (22549 ms)\n      ✕ SidebarTrigger在不同屏幕尺寸下应该正常工作 (2728 ms)\n      ✕ SidebarTrigger应该具备正确的无障碍属性 (2751 ms)\n    LanguageSwitcher 集成测试\n      ✕ LanguageSwitcher应该正确显示和切换语言 (2731 ms)\n      ✕ LanguageSwitcher应该支持键盘导航 (2736 ms)\n      ✕ LanguageSwitcher在移动端应该正常工作 (2721 ms)\n    ThemeToggle 集成测试\n      ✕ ThemeToggle应该正确切换主题 (2691 ms)\n      ✕ ThemeToggle应该支持三种主题模式循环 (2713 ms)\n      ✕ ThemeToggle应该持久化主题偏好 (2721 ms)\n    UserMenu 集成测试\n      ✕ UserMenu应该正确显示用户信息 (2721 ms)\n      ✕ UserMenu应该包含正确的菜单选项 (2753 ms)\n      ✕ UserMenu应该支持键盘导航 (2726 ms)\n    组件协同工作测试\n      ✕ 多个组件应该能够同时正常工作 (2733 ms)\n      ✕ 组件状态应该独立管理 (2728 ms)\n    错误处理和边界情况\n      ✕ 快速连续点击不应该导致错误 (2716 ms)\n      ✕ 网络断开时组件应该优雅降级 (2754 ms)\n\n  ● 现有组件集成测试 › SidebarTrigger 集成测试 › SidebarTrigger应该正确控制侧边栏显示/隐藏\n\n    TimeoutError: Waiting for selector `[data-testid=\"top-menu-bar\"]` failed: Waiting failed: 10000ms exceeded\n\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n    > 40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n         |         ^\n      41 |     });\n      42 |\n      43 |     afterEach(async () => {\n\n      at new WaitTask (../../node_modules/puppeteer-core/src/common/WaitTask.ts:76:28)\n      at IsolatedWorld.waitForFunction (../../node_modules/puppeteer-core/src/api/Realm.ts:74:22)\n      at Function.waitFor (../../node_modules/puppeteer-core/src/common/QueryHandler.ts:170:50)\n      at CdpFrame.waitForSelector (../../node_modules/puppeteer-core/src/api/Frame.ts:747:13)\n      at CdpPage.waitForSelector (../../node_modules/puppeteer-core/src/api/Page.ts:3028:12)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:40:9)\n\n  ● 现有组件集成测试 › SidebarTrigger 集成测试 › SidebarTrigger在不同屏幕尺寸下应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › SidebarTrigger 集成测试 › SidebarTrigger应该具备正确的无障碍属性\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › LanguageSwitcher 集成测试 › LanguageSwitcher应该正确显示和切换语言\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › LanguageSwitcher 集成测试 › LanguageSwitcher应该支持键盘导航\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › LanguageSwitcher 集成测试 › LanguageSwitcher在移动端应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › ThemeToggle 集成测试 › ThemeToggle应该正确切换主题\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › ThemeToggle 集成测试 › ThemeToggle应该支持三种主题模式循环\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › ThemeToggle 集成测试 › ThemeToggle应该持久化主题偏好\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › UserMenu 集成测试 › UserMenu应该正确显示用户信息\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › UserMenu 集成测试 › UserMenu应该包含正确的菜单选项\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › UserMenu 集成测试 › UserMenu应该支持键盘导航\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › 组件协同工作测试 › 多个组件应该能够同时正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › 组件协同工作测试 › 组件状态应该独立管理\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › 错误处理和边界情况 › 快速连续点击不应该导致错误\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\n  ● 现有组件集成测试 › 错误处理和边界情况 › 网络断开时组件应该优雅降级\n\n    No element found for selector: input[id=\"login\"]\n\n      35 |         \n      36 |         // 执行登录\n    > 37 |         await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n         |         ^\n      38 |         await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      39 |         await page.click('button[type=\"submit\"]');\n      40 |         await page.waitForSelector('[data-testid=\"top-menu-bar\"]', { timeout: 10000 });\n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/componentIntegration.test.cjs:37:9)\n\nTest Suites: 1 failed, 1 total\nTests:       16 failed, 16 total\nSnapshots:   0 total\nTime:        64.564 s\nRan all test suites matching /\\/Users\\/jameswang\\/Codes\\/hyq-mes-v2\\/tests\\/frontend\\/e2e\\/componentIntegration.test.cjs/i.\n",
  "timestamp": "2025-06-16T18:57:34.430Z"
}