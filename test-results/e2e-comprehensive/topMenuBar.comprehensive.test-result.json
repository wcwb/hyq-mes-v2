{
  "suite": "TopMenuBar组件测试",
  "file": "topMenuBar.comprehensive.test.cjs",
  "success": false,
  "duration": 70974,
  "estimatedTime": "60s",
  "stdout": "  console.log\n    ✅ Jest Frontend E2E 测试环境设置完成\n\n      at Object.<anonymous> (jest.setup.cjs:317:9)\n\n  console.log\n    🚀 开始 Frontend E2E 测试环境初始化...\n\n      at Object.<anonymous> (jest.setup.cjs:269:13)\n\n  console.log\n    📍 测试基础URL: http://localhost:8000\n\n      at Object.<anonymous> (jest.setup.cjs:270:13)\n\n  console.log\n    🖥️  无头模式: 禁用\n\n      at Object.<anonymous> (jest.setup.cjs:271:13)\n\n  console.log\n    📸 截图保存路径: /Users/jameswang/Codes/hyq-mes-v2/test-results/e2e-comprehensive\n\n      at Object.<anonymous> (jest.setup.cjs:272:13)\n\n  console.error\n    ❌ 无法连接到测试服务器: A dynamic import callback was invoked without --experimental-vm-modules\n\n      286 |         }\n      287 |     } catch (error) {\n    > 288 |         console.error('❌ 无法连接到测试服务器:', error.message);\n          |                 ^\n      289 |         console.error('请确保开发服务器正在运行: php artisan serve');\n      290 |     }\n      291 | });\n\n      at Object.<anonymous> (jest.setup.cjs:288:17)\n\n  console.error\n    请确保开发服务器正在运行: php artisan serve\n\n      287 |     } catch (error) {\n      288 |         console.error('❌ 无法连接到测试服务器:', error.message);\n    > 289 |         console.error('请确保开发服务器正在运行: php artisan serve');\n          |                 ^\n      290 |     }\n      291 | });\n      292 |\n\n      at Object.<anonymous> (jest.setup.cjs:289:17)\n\n  console.log\n    开始执行登录流程...\n\n      at Object.performLogin (jest.setup.cjs:181:21)\n\n  console.log\n    已点击登录按钮\n\n      at Object.performLogin (jest.setup.cjs:206:21)\n\n  console.log\n    登录成功，页面已跳转至: http://localhost:8000/dashboard\n\n      at Object.performLogin (jest.setup.cjs:214:21)\n\n  console.log\n    用户已经登录，跳过登录流程，当前URL: http://localhost:8000/dashboard\n\n      at Object.performLogin (jest.setup.cjs:177:25)\n\n  console.log\n    🧹 Frontend E2E 测试环境清理完成\n\n      at Object.<anonymous> (jest.setup.cjs:295:13)\n\n",
  "stderr": "FAIL ./topMenuBar.comprehensive.test.cjs (70.56 s)\n  TopMenuBar 组件全面测试\n    基础渲染测试\n      ✓ TopMenuBar应该正确渲染并包含所有核心区域 (23531 ms)\n      ✕ SidebarTrigger按钮应该正确渲染和工作 (12936 ms)\n    响应式布局测试\n      ✕ 桌面端应该显示完整布局 (2841 ms)\n      ✕ 移动端应该显示紧凑布局 (2859 ms)\n      ✕ 平板端应该正确适配 (2826 ms)\n    组件集成测试\n      ✕ LanguageSwitcher集成应该正常工作 (2739 ms)\n      ✕ ThemeToggle集成应该正常工作 (2709 ms)\n      ✕ UserMenu集成应该正常工作 (2709 ms)\n    无障碍功能测试\n      ✕ TopMenuBar应该具备正确的ARIA属性 (2710 ms)\n      ✕ 键盘导航应该正常工作 (2722 ms)\n      ✕ Skip Links应该正常工作 (2721 ms)\n    性能测试\n      ✕ TopMenuBar渲染时间应该在合理范围内 (2719 ms)\n      ✕ 组件懒加载应该正常工作 (2730 ms)\n    错误处理测试\n      ✕ 不应该有JavaScript错误 (2724 ms)\n\n  ● TopMenuBar 组件全面测试 › 基础渲染测试 › SidebarTrigger按钮应该正确渲染和工作\n\n    TimeoutError: Waiting for selector `[data-testid=\"sidebar-trigger\"]` failed: Waiting failed: 10000ms exceeded\n\n      116 |             await global.testHelpers.performLogin(page);\n      117 |             \n    > 118 |             await page.waitForSelector('[data-testid=\"sidebar-trigger\"]', { timeout: 10000 });\n          |             ^\n      119 |\n      120 |             // 检查SidebarTrigger存在\n      121 |             const sidebarTrigger = await page.$('[data-testid=\"sidebar-trigger\"]');\n\n      at new WaitTask (../../node_modules/puppeteer-core/src/common/WaitTask.ts:76:28)\n      at IsolatedWorld.waitForFunction (../../node_modules/puppeteer-core/src/api/Realm.ts:74:22)\n      at Function.waitFor (../../node_modules/puppeteer-core/src/common/QueryHandler.ts:170:50)\n      at CdpFrame.waitForSelector (../../node_modules/puppeteer-core/src/api/Frame.ts:747:13)\n      at CdpPage.waitForSelector (../../node_modules/puppeteer-core/src/api/Page.ts:3028:12)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:118:13)\n\n  ● TopMenuBar 组件全面测试 › 响应式布局测试 › 桌面端应该显示完整布局\n\n    No element found for selector: input[id=\"login\"]\n\n      149 |             \n      150 |             // 登录\n    > 151 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      152 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      153 |             await page.click('button[type=\"submit\"]');\n      154 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:151:13)\n\n  ● TopMenuBar 组件全面测试 › 响应式布局测试 › 移动端应该显示紧凑布局\n\n    No element found for selector: input[id=\"login\"]\n\n      188 |             \n      189 |             // 登录\n    > 190 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      191 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      192 |             await page.click('button[type=\"submit\"]');\n      193 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:190:13)\n\n  ● TopMenuBar 组件全面测试 › 响应式布局测试 › 平板端应该正确适配\n\n    No element found for selector: input[id=\"login\"]\n\n      224 |             \n      225 |             // 登录\n    > 226 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      227 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      228 |             await page.click('button[type=\"submit\"]');\n      229 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:226:13)\n\n  ● TopMenuBar 组件全面测试 › 组件集成测试 › LanguageSwitcher集成应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      258 |         test('LanguageSwitcher集成应该正常工作', async () => {\n      259 |             // 登录\n    > 260 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      261 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      262 |             await page.click('button[type=\"submit\"]');\n      263 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:260:13)\n\n  ● TopMenuBar 组件全面测试 › 组件集成测试 › ThemeToggle集成应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      285 |         test('ThemeToggle集成应该正常工作', async () => {\n      286 |             // 登录\n    > 287 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      288 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      289 |             await page.click('button[type=\"submit\"]');\n      290 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:287:13)\n\n  ● TopMenuBar 组件全面测试 › 组件集成测试 › UserMenu集成应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      316 |         test('UserMenu集成应该正常工作', async () => {\n      317 |             // 登录\n    > 318 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      319 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      320 |             await page.click('button[type=\"submit\"]');\n      321 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:318:13)\n\n  ● TopMenuBar 组件全面测试 › 无障碍功能测试 › TopMenuBar应该具备正确的ARIA属性\n\n    No element found for selector: input[id=\"login\"]\n\n      345 |         test('TopMenuBar应该具备正确的ARIA属性', async () => {\n      346 |             // 登录\n    > 347 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      348 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      349 |             await page.click('button[type=\"submit\"]');\n      350 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:347:13)\n\n  ● TopMenuBar 组件全面测试 › 无障碍功能测试 › 键盘导航应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      367 |         test('键盘导航应该正常工作', async () => {\n      368 |             // 登录\n    > 369 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      370 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      371 |             await page.click('button[type=\"submit\"]');\n      372 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:369:13)\n\n  ● TopMenuBar 组件全面测试 › 无障碍功能测试 › Skip Links应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      398 |         test('Skip Links应该正常工作', async () => {\n      399 |             // 登录\n    > 400 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      401 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      402 |             await page.click('button[type=\"submit\"]');\n      403 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:400:13)\n\n  ● TopMenuBar 组件全面测试 › 性能测试 › TopMenuBar渲染时间应该在合理范围内\n\n    No element found for selector: input[id=\"login\"]\n\n      427 |             \n      428 |             // 登录\n    > 429 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      430 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      431 |             await page.click('button[type=\"submit\"]');\n      432 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:429:13)\n\n  ● TopMenuBar 组件全面测试 › 性能测试 › 组件懒加载应该正常工作\n\n    No element found for selector: input[id=\"login\"]\n\n      445 |         test('组件懒加载应该正常工作', async () => {\n      446 |             // 登录\n    > 447 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      448 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      449 |             await page.click('button[type=\"submit\"]');\n      450 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:447:13)\n\n  ● TopMenuBar 组件全面测试 › 错误处理测试 › 不应该有JavaScript错误\n\n    No element found for selector: input[id=\"login\"]\n\n      472 |         test('不应该有JavaScript错误', async () => {\n      473 |             // 登录\n    > 474 |             await page.type('input[id=\"login\"]', global.TEST_CONFIG.loginCredentials.email);\n          |             ^\n      475 |             await page.type('input[id=\"password\"]', global.TEST_CONFIG.loginCredentials.password);\n      476 |             await page.click('button[type=\"submit\"]');\n      477 |             \n\n      at assert (../../node_modules/puppeteer-core/src/util/assert.ts:19:11)\n      at CdpFrame.type (../../node_modules/puppeteer-core/src/api/Frame.ts:1167:11)\n      at Object.<anonymous> (e2e/topMenuBar.comprehensive.test.cjs:474:13)\n\nTest Suites: 1 failed, 1 total\nTests:       13 failed, 1 passed, 14 total\nSnapshots:   0 total\nTime:        70.581 s\nRan all test suites matching /\\/Users\\/jameswang\\/Codes\\/hyq-mes-v2\\/tests\\/frontend\\/e2e\\/topMenuBar.comprehensive.test.cjs/i.\n",
  "timestamp": "2025-06-16T18:56:27.454Z"
}