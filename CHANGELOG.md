# 更新日志

本文档记录了HYQ MES V2项目的所有重要更改。

## [2.0.0] - 2025-01-16

### ✨ 新增功能

#### 🗂️ 智能标签页系统
- **标签页状态管理** (`useTabState`)
  - 动态创建、切换、关闭标签页
  - 支持固定标签页
  - 标签页排序和重新排列
  
- **数据持久化** (`useTabPersistence`) 
  - 浏览器重启后自动恢复标签页状态
  - 支持跨会话的标签页数据保存
  - 智能清理过期标签页数据
  
- **渐进式加载** (`useProgressiveTabLoading`)
  - 按需预加载标签页内容
  - 优化内存使用和性能
  - 支持大量标签页场景

- **上下文菜单系统**
  - 右键菜单支持关闭、复制、固定等操作
  - 完整的键盘快捷键支持
  - 无障碍友好的交互设计

#### 🔍 全局搜索系统
- **智能搜索** (`useGlobalSearch`)
  - 跨模块实时搜索功能
  - 300ms防抖优化搜索性能
  - 支持搜索历史和建议
  
- **搜索结果智能分组**
  - 按类型自动分组（用户、订单、产品等）
  - 动态优先级排序
  - 支持自定义分组规则
  
- **键盘快捷键支持**
  - `Ctrl+K`/`Cmd+K` 快速唤起搜索
  - 完整的键盘导航支持
  - ESC键快速关闭

- **无障碍访问**
  - 完整的屏幕阅读器支持
  - ARIA标签和角色定义
  - 高对比度和大字体支持

#### 🧪 完整测试框架
- **E2E测试** (Jest + Playwright)
  - 跨浏览器自动化测试
  - 可视化回归测试
  - 真实用户场景模拟
  
- **前端单元测试** (Vitest)
  - Vue组合式函数完整测试覆盖
  - 组件输入输出测试
  - 模拟数据和API测试
  
- **集成测试**
  - 组件间交互测试
  - 状态管理集成测试
  - API服务集成测试
  
- **无障碍测试**
  - 自动化WCAG 2.1合规性检查
  - 键盘导航自动测试
  - 屏幕阅读器兼容性测试

#### 🎨 UI组件增强
- **Reka UI v2集成**
  - 无样式组件库架构
  - 完整的组件组合模式支持
  - TypeScript类型安全

- **新增UI组件**
  - `TabBar` - 标签页栏组件
  - `TabContainer` - 标签页容器
  - `TabContent` - 标签页内容
  - `SearchBar` - 搜索栏组件
  - `SearchDialog` - 搜索对话框
  - `TopMenuBar` - 顶部菜单栏

### 🔧 技术改进

#### 📁 项目结构重构
- 规则文件从 `.cursor-rules/` 迁移到 `.cursor/rules/`
- 规则文件格式从 `.md` 转换为 `.mdc`
- 测试目录重新组织（分离E2E和前端测试）
- 新增演示和示例代码目录

#### 🛡️ 安全改进
- 移除Git历史中的敏感配置文件
- 添加 `.cursor/mcp.json` 到 `.gitignore`
- 提供配置文件模板 (`.cursor/mcp.json.example`)
- 敏感信息检测和防护

#### 🌐 国际化增强
- 严格的国际化策略：禁止硬编码文本
- 更新中英文语言文件支持新功能
- 完善多语言界面支持
- 动态语言切换优化

#### ⚡ 性能优化
- **组件懒加载**：大型组件按需加载
- **状态优化**：使用 `shallowRef` 优化大数据集
- **搜索防抖**：300ms防抖优化用户体验
- **Bundle分析**：优化代码分割策略

### 🔄 技术栈更新

#### 依赖升级
- Vue 3 + Composition API
- Reka UI v2 无样式组件库
- TypeScript 严格模式
- Jest + Playwright E2E测试
- Vitest 前端单元测试

#### 新增依赖
- `@testing-library/vue` - Vue组件测试
- `jest-axe` - 无障碍测试
- `puppeteer` - E2E浏览器控制
- `@vue/test-utils` - Vue测试工具

### 📚 文档改进
- 更新README.md包含所有新功能
- 新增测试指南文档
- 完善开发规则文档
- 添加API文档和示例

### 🐛 修复
- 修复标签页切换时的状态丢失问题
- 解决搜索结果排序不稳定的问题
- 修复深色模式下的样式问题
- 解决移动端响应式布局问题

---

## [1.0.0] - 2024-12-XX

### ✨ 初始版本
- Laravel 12.x + Vue 3 + Inertia.js基础架构
- 基础权限管理系统
- 多语言支持
- 字体本地化优化
- 基础UI组件库

---

## 约定说明

### 版本号格式
项目遵循 [语义化版本](https://semver.org/) 规范：
- **主版本号**：不兼容的API更改
- **次版本号**：向下兼容的功能性新增
- **修订版本号**：向下兼容的问题修正

### 更改类型
- **✨ 新增功能** (feat): 新的功能特性
- **🐛 修复** (fix): 问题修复
- **🔧 技术改进** (refactor): 代码重构
- **📚 文档** (docs): 文档更新
- **🧪 测试** (test): 测试相关
- **🛡️ 安全** (security): 安全相关更新
- **⚡ 性能** (perf): 性能优化
- **🎨 样式** (style): 代码格式化 